{"version":3,"sources":["lib/Matrix/multi.js","components/Camera.js","hooks/useGL.js","components/canvasCalculate.js","lib/Matrix/subtract.js","lib/Matrix/plus.js","components/UI.js","components/matrixes.js","App.js","serviceWorker.js","index.js"],"names":["M_UNIT","prev","current","Camera","executes","width","height","enableGl","useState","enable","setEnable","useEffect","canvas","document","createElement","getContext","useGL","useRef","video","useMemo","autoplay","navigator","mediaDevices","getUserMedia","facingMode","ideal","audio","then","stream","srcObject","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","e","console","log","transformMat","reduce","multi","ctx","handler","setInterval","a","play","videoWidth","style","videoHeight","drawImage","pixel","getImageData","data","i","length","putImageData","error","clearInterval","canvasCalculate","display","justifyContent","alignItems","position","maxHeight","ref","id","onClick","left","right","Array","fill","map","item","index","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","props","React","anchorEl","setAnchorEl","open","Boolean","classes","textAlign","top","bottom","zIndex","pointer","className","AppBar","Toolbar","Typography","variant","IconButton","aria-label","aria-controls","aria-haspopup","event","currentTarget","color","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","setType","M_SIMULATE_P","M_SIMULATE_D","M_SIMULATE_T","M_PROJECT_P","M_PROJECT_D","M_PROJECT_T","DN","project","simulate","TN","PN","DS","TS","PS","M_LMS2RGB","M_RGB2LMS","App","type","plus","matrices","substract","trans","setTrans","documentElement","clientWidth","clientHeight","UI","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.97e994ba.chunk.js","sourcesContent":["const M_UNIT = [\r\n  [1, 0, 0, 0],\r\n  [0, 1, 0, 0],\r\n  [0, 0, 1, 0],\r\n  [0, 0, 0, 1],\r\n];\r\n\r\nexport default (prev, current = M_UNIT) => {\r\n  return [\r\n    [\r\n      prev[0][0] * current[0][0] +\r\n        prev[0][1] * current[1][0] +\r\n        prev[0][2] * current[2][0] +\r\n        prev[0][3] * current[3][0],\r\n      prev[0][0] * current[0][1] +\r\n        prev[0][1] * current[1][1] +\r\n        prev[0][2] * current[2][1] +\r\n        prev[0][3] * current[3][1],\r\n      prev[0][0] * current[0][2] +\r\n        prev[0][1] * current[1][2] +\r\n        prev[0][2] * current[2][2] +\r\n        prev[0][3] * current[3][2],\r\n      prev[0][0] * current[0][3] +\r\n        prev[0][1] * current[1][3] +\r\n        prev[0][2] * current[2][3] +\r\n        prev[0][3] * current[3][3],\r\n    ],\r\n    [\r\n      prev[1][0] * current[0][0] +\r\n        prev[1][1] * current[1][0] +\r\n        prev[1][2] * current[2][0] +\r\n        prev[1][3] * current[3][0],\r\n      prev[1][0] * current[0][1] +\r\n        prev[1][1] * current[1][1] +\r\n        prev[1][2] * current[2][1] +\r\n        prev[1][3] * current[3][1],\r\n      prev[1][0] * current[0][2] +\r\n        prev[1][1] * current[1][2] +\r\n        prev[1][2] * current[2][2] +\r\n        prev[1][3] * current[3][2],\r\n      prev[1][0] * current[0][3] +\r\n        prev[1][1] * current[1][3] +\r\n        prev[1][2] * current[2][3] +\r\n        prev[1][3] * current[3][3],\r\n    ],\r\n    [\r\n      prev[2][0] * current[0][0] +\r\n        prev[2][1] * current[1][0] +\r\n        prev[2][2] * current[2][0] +\r\n        prev[2][3] * current[3][0],\r\n      prev[2][0] * current[0][1] +\r\n        prev[2][1] * current[1][1] +\r\n        prev[2][2] * current[2][1] +\r\n        prev[2][3] * current[3][1],\r\n      prev[2][0] * current[0][2] +\r\n        prev[2][1] * current[1][2] +\r\n        prev[2][2] * current[2][2] +\r\n        prev[2][3] * current[3][2],\r\n      prev[2][0] * current[0][3] +\r\n        prev[2][1] * current[1][3] +\r\n        prev[2][2] * current[2][3] +\r\n        prev[2][3] * current[3][3],\r\n    ],\r\n    [\r\n      prev[3][0] * current[0][0] +\r\n        prev[3][1] * current[1][0] +\r\n        prev[3][2] * current[2][0] +\r\n        prev[3][3] * current[3][0],\r\n      prev[3][0] * current[0][1] +\r\n        prev[3][1] * current[1][1] +\r\n        prev[3][2] * current[2][1] +\r\n        prev[3][3] * current[3][1],\r\n      prev[3][0] * current[0][2] +\r\n        prev[3][1] * current[1][2] +\r\n        prev[3][2] * current[2][2] +\r\n        prev[3][3] * current[3][2],\r\n      prev[3][0] * current[0][3] +\r\n        prev[3][1] * current[1][3] +\r\n        prev[3][2] * current[2][3] +\r\n        prev[3][3] * current[3][3],\r\n    ],\r\n  ];\r\n};\r\n","import React, { useEffect, useRef, useMemo } from \"react\";\r\nimport useGL from \"../hooks/useGL\";\r\nimport canvasCalculate from \"./canvasCalculate\";\r\nimport glCalculate from \"./glCalculate\";\r\n\r\nfunction Camera({ executes = [], width = 500, height = 500 }) {\r\n  const enableGl = useGL();\r\n  const canvas = useRef();\r\n  const video = useMemo(() => {\r\n    let video = document.createElement(\"video\");\r\n    video.autoplay = true;\r\n    video.width = width;\r\n    video.height = height;\r\n    return video;\r\n  }, [document]);\r\n\r\n  useEffect(() => {\r\n    if (navigator.mediaDevices.getUserMedia) {\r\n      navigator.mediaDevices\r\n        .getUserMedia({\r\n          video: {\r\n            facingMode: \"environment\",\r\n            width: { ideal: (720 * 9) / 16 },\r\n            height: { ideal: 720 },\r\n          },\r\n          audio: false,\r\n        })\r\n        .then((stream) => {\r\n          video.srcObject = stream;\r\n        });\r\n    } else {\r\n      navigator.getUserMedia =\r\n        navigator.getUserMedia ||\r\n        navigator.webkitGetUserMedia ||\r\n        navigator.mozGetUserMedia ||\r\n        navigator.msGetUserMedia;\r\n\r\n      navigator.getUserMedia(\r\n        {\r\n          video: { width: 1280, height: 720 },\r\n          audio: false,\r\n        },\r\n        function (stream) {\r\n          //将采集到的视频信息显示在video标签中\r\n          video.srcObject = stream;\r\n        },\r\n        function (e) {\r\n          console.log(e);\r\n        }\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(enableGl);\r\n    if (!enableGl) {\r\n      const clearHandler = canvasCalculate(video, canvas.current, executes);\r\n      return clearHandler;\r\n    } else {\r\n      // glCalculate(video, canvas, executes);\r\n    }\r\n  }, [enableGl, executes]);\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <canvas\r\n        style={{\r\n          maxHeight: \"100vh\",\r\n          width: \"100vw\",\r\n        }}\r\n        ref={canvas}\r\n        id=\"c1\"\r\n        width={width}\r\n        height={height}\r\n        onClick={() => (video.play = !video.play)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Camera;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default () => {\r\n  const [enable, setEnable] = useState(true);\r\n  useEffect(() => {\r\n    // Create canvas element. The canvas is not added to the\r\n    // document itself, so it is never displayed in the\r\n    // browser window.\r\n    var canvas = document.createElement(\"canvas\");\r\n    // Get WebGLRenderingContext from canvas element.\r\n    var gl =\r\n      canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\");\r\n    // Report the result.\r\n    // if (gl && gl instanceof WebGLRenderingContext) {\r\n    //   setEnable(true);\r\n    // } else {\r\n    //   setEnable(false);\r\n    // }\r\n    setEnable(false);\r\n  }, []);\r\n  return enable;\r\n};\r\n","import multi from \"../lib/Matrix/multi\";\r\n\r\nexport default (video, canvas, executes) => {\r\n  const transformMat = executes.reduce(\r\n    (prev, current) => {\r\n      return multi(prev, current);\r\n    },\r\n    [\r\n      [1, 0, 0, 0],\r\n      [0, 1, 0, 0],\r\n      [0, 0, 1, 0],\r\n      [0, 0, 0, 1],\r\n    ]\r\n  );\r\n\r\n  console.log(transformMat);\r\n  let ctx = canvas.getContext(\"2d\");\r\n  console.log(ctx);\r\n  const handler = setInterval(async () => {\r\n    if (video.play === false || video.videoWidth === 0) return;\r\n    try {\r\n      canvas.style.width = `${video.videoWidth}px`;\r\n      canvas.style.height = `${video.videoHeight}px`;\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\r\n      const pixel = ctx.getImageData(0, 0, video.videoWidth, video.videoHeight);\r\n      const data = pixel.data;\r\n      for (var i = 0; i < data.length; i += 4) {\r\n        // R\r\n        data[i] =\r\n          transformMat[0][0] * data[i] +\r\n          transformMat[0][1] * data[i + 1] +\r\n          transformMat[0][2] * data[i + 2] +\r\n          transformMat[0][3] * data[i + 3];\r\n        // G\r\n        data[i + 1] =\r\n          transformMat[1][0] * data[i] +\r\n          transformMat[1][1] * data[i + 1] +\r\n          transformMat[1][2] * data[i + 2] +\r\n          transformMat[1][3] * data[i + 3];\r\n        // B\r\n        data[i + 2] =\r\n          transformMat[2][0] * data[i] +\r\n          transformMat[2][1] * data[i + 1] +\r\n          transformMat[2][2] * data[i + 2] +\r\n          transformMat[2][3] * data[i + 3];\r\n      }\r\n      ctx.putImageData(pixel, 0, 0);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, 1000 / 60);\r\n\r\n  const clearHandler = () => {\r\n    clearInterval(handler);\r\n  };\r\n  return clearHandler;\r\n};\r\n","export default (left, right) => {\r\n  return [\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[0][index] - right[0][index]),\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[1][index] - right[1][index]),\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[2][index] - right[2][index]),\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[3][index] - right[3][index]),\r\n  ];\r\n};\r\n","export default (left, right) => {\r\n  return [\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[0][index] + right[0][index]),\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[1][index] + right[1][index]),\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[2][index] + right[2][index]),\r\n    Array(4)\r\n      .fill(0)\r\n      .map((item, index) => left[3][index] + right[3][index]),\r\n  ];\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n// import MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nexport default (props) => {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const classes = useStyles();\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        textAlign: \"left\",\r\n        position: \"fixed\",\r\n        top: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        zIndex: 999,\r\n        pointer: \"none\",\r\n      }}\r\n    >\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              基于WebRTC的色盲数字色彩矫正程序\r\n            </Typography>\r\n            <div>\r\n              <IconButton\r\n                aria-label=\"account of current user\"\r\n                aria-controls=\"menu-appbar\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleMenu}\r\n                color=\"inherit\"\r\n              >\r\n                模式选择\r\n              </IconButton>\r\n              <Menu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{\r\n                  vertical: \"top\",\r\n                  horizontal: \"right\",\r\n                }}\r\n                keepMounted\r\n                transformOrigin={{\r\n                  vertical: \"top\",\r\n                  horizontal: \"right\",\r\n                }}\r\n                open={open}\r\n                onClose={handleClose}\r\n              >\r\n                <MenuItem\r\n                  onClick={() => {\r\n                    props.setType && props.setType(\"DN\");\r\n                  }}\r\n                >\r\n                  红色盲 - 自然\r\n                </MenuItem>\r\n                <MenuItem\r\n                  onClick={() => {\r\n                    props.setType && props.setType(\"DS\");\r\n                  }}\r\n                >\r\n                  红色盲 - 高对比\r\n                </MenuItem>\r\n                <MenuItem onClick={() => props.setType && props.setType(\"PN\")}>\r\n                  绿色盲 - 自然\r\n                </MenuItem>\r\n                <MenuItem onClick={() => props.setType && props.setType(\"PS\")}>\r\n                  绿色盲 - 高对比\r\n                </MenuItem>\r\n                {/* <MenuItem onClick={() => props.setType && props.setType(\"TN\")}>\r\n                  蓝色盲 - 自然\r\n                </MenuItem> */}\r\n                <MenuItem onClick={() => props.setType && props.setType(\"TS\")}>\r\n                  蓝色盲 - 高对比\r\n                </MenuItem>\r\n              </Menu>\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","let strenth = 0.7;\r\n\r\nlet M_SIMULATE_P = [\r\n  [0, 2.02344, -2.52581, 0],\r\n  [0, 1, 0, 0],\r\n  [0, 0, 1, 0],\r\n  [0, 0, 0, 1],\r\n];\r\n\r\nlet M_SIMULATE_D = [\r\n  [1, 0, 0, 0],\r\n  [0.49421, 0, 1.24827, 0],\r\n  [0, 0, 1, 0],\r\n  [0, 0, 0, 1],\r\n];\r\n\r\nlet M_SIMULATE_T = [\r\n  [1, 0, 0, 0],\r\n  [0, 1, 0, 0],\r\n  [-0.395913, 0.801109, 0, 0],\r\n  [0, 0, 0, 1],\r\n];\r\n\r\nlet M_PROJECT_P = [\r\n  [0, 0, 0, 0],\r\n  [strenth, 1, 0, 0],\r\n  [strenth, 0, 1, 0],\r\n  [0, 0, 0, 1],\r\n];\r\n\r\nlet M_PROJECT_D = [\r\n  [1, strenth, 0, 0],\r\n  [0, 0, 0, 0],\r\n  [0, strenth, 1, 0],\r\n  [0, 0, 0, 1],\r\n];\r\nlet M_PROJECT_T = [\r\n  [1, 0, strenth, 0],\r\n  [0, 1, strenth, 0],\r\n  [0, 0, 1, 0],\r\n  [0, 0, 0, 1],\r\n];\r\n\r\nexport default {\r\n  DN: {\r\n    project: M_PROJECT_D,\r\n    simulate: M_SIMULATE_D,\r\n  },\r\n  TN: {\r\n    project: M_PROJECT_T,\r\n    simulate: M_SIMULATE_T,\r\n  },\r\n  PN: {\r\n    project: M_PROJECT_P,\r\n    simulate: M_SIMULATE_P,\r\n  },\r\n  DS: {\r\n    project: M_PROJECT_T,\r\n    simulate: M_SIMULATE_D,\r\n  },\r\n  TS: {\r\n    project: M_PROJECT_P,\r\n    simulate: M_SIMULATE_T,\r\n  },\r\n  PS: {\r\n    project: M_PROJECT_D,\r\n    simulate: M_SIMULATE_P,\r\n  },\r\n};\r\n","import React, { useMemo, useEffect, useState } from \"react\";\n\nimport \"./App.css\";\n\nimport Camera from \"./components/Camera\";\nimport multi from \"./lib/Matrix/multi\";\nimport substract from \"./lib/Matrix/subtract\";\nimport plus from \"./lib/Matrix/plus\";\nimport UI from \"./components/UI\";\nimport matrices from \"./components/matrixes\";\nlet M_UNIT = [\n  [1, 0, 0, 0],\n  [0, 1, 0, 0],\n  [0, 0, 1, 0],\n  [0, 0, 0, 1],\n];\n\nlet M_LMS2RGB = [\n  [0.0809, -0.1305, 0.1167, 0],\n  [-0.0102, 0.0540193266, -0.1136, 0],\n  [-0.0003, -0.0041, 0.6935, 0],\n  [0, 0, 0, 1],\n];\n\nlet M_RGB2LMS = [\n  [17.8824, 43.5161, 4.1193, 0],\n  [3.4557, 27.1554, 3.8671, 0],\n  [0.02996, 0.18431, 1.4671, 0],\n  [0, 0, 0, 1],\n];\n\nfunction App() {\n  const [type, setType] = React.useState(\"DN\");\n  const [trans, setTrans] = useState(\n    plus(\n      multi(\n        matrices[type].project,\n        substract(\n          M_UNIT,\n          multi(M_LMS2RGB, multi(matrices[type].simulate, M_RGB2LMS))\n        )\n      ),\n      M_UNIT\n    )\n  );\n  const [width, height] = useMemo(() => {\n    return [\n      document.documentElement.clientWidth,\n      document.documentElement.clientHeight,\n    ];\n  }, []);\n\n  React.useEffect(() => {\n    console.log(type);\n    setTrans(\n      plus(\n        multi(\n          matrices[type].project,\n          substract(\n            M_UNIT,\n            multi(M_LMS2RGB, multi(matrices[type].simulate, M_RGB2LMS))\n          )\n        ),\n        M_UNIT\n      )\n    );\n  }, [type]);\n\n  return (\n    <div className=\"App\">\n      <Camera width={width} height={height} executes={[trans]} />\n      <UI\n        setType={(type) => {\n          setType(type);\n        }}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}